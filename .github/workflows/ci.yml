name: WolkenWelten CI

on:
  push:
  pull_request:

jobs:
  cargo-fmt:
    name: Check code formatting
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Run cargo fmt
      run: cargo fmt --all --check
  cargo-clippy:
    name: Check code with clippy
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Install dependencies
        run: sudo apt-get -y install libasound2-dev
      - name: Run clippy
        run: cargo clippy --no-deps
  cargo-test:
    name: Run testsuite
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Install dependencies
      run: sudo apt-get -y install libasound2-dev
    - name: Run testsuite
      run: cargo test

